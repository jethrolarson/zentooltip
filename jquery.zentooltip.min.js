/**
 * @fileOverview Date: 2009-04-6
 * Licensed under Mozilla Public License 1.1 {@link http://www.mozilla.org/MPL/}
 * @author <a href="mailto:jethrolarson@gmail.com">Jethro Larson</a>
 * @version 12
 */
(function(a){a.fn.zenTooltip=function(d){var h=this;d=jQuery.extend({delay:300,mouseOffset:{left:11,top:23},useFormatting:true,tags:{"#":"h4","*":"b",_:"i","|":"p"},tooltipClass:""},d);a("body").append('<div id="tooltip"><div id="tooltipIWrap"></div></div>');var e=a("#tooltip").hide();var b=function(){clearTimeout(a(this).data("timeoutID"));a("#tooltip").hide()};var g=function(i){if(d.tooltipClass!=""){e.addClass(d.tooltipClass)}else{e.removeClass()}var l=c;l.left+=d.mouseOffset.left;l.top+=d.mouseOffset.top;var k=a(this).data("title");if(d.useFormatting){k=f(k)}a("#tooltipIWrap").html(k);e.css({left:l.left,top:l.top}).show();var m=e.width(),j=e.height();if(l.top+j>a(window).scrollTop()+a(window).height()){e.css("top",l.top-(j+(d.mouseOffset.top*1.5)))}if(l.left+m>a(window).scrollLeft()+a(window).width()){e.css("left",l.left-(m+d.mouseOffset.left))}if(a.fn.bgiframe){e.bgiframe()}};h.hover(function(k){var i=this;var j=setTimeout(function(){g.call(i,k)},d.delay);a(this).data("timeoutID",j)},b).each(function(){a(this).data("title",this.title)}).removeAttr("title");function f(i){a.each(d.tags,function(l,n){var m=i.split(l),j="";for(var k=0;k<m.length;k++){if(k>0){j+="<"+(k%2?"":"/")+n+">"}j+=m[k]}i=j});return i}var c={};a(document).mousemove(function(i){if(!i){var i=window.event}if(i.pageX||i.pageY){c.left=i.pageX;c.top=i.pageY}else{if(i.clientX||i.clientY){c.left=i.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;c.top=i.clientY+document.body.scrollTop+document.documentElement.scrollTop}}});return this}})(jQuery);